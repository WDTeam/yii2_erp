Message-ID: <ee8ffeafb339a22d61b6d4bd18ee00c3@fr.train>
Date: Sat, 12 Sep 2015 17:13:58 +0800
Subject: New train.1jiajie.com error log message
From: 
To: zhanghang@1jiajie.com, zhangxugang@1jiajie.com, liuhaijian@1jiajie.com,
 lidenggao@1jiajie.com
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

2015-09-12 17:13:58
[127.0.0.1][-][ees9kuf7km2m0prklo3j647m13][error][yii=
\db\Exception]
exception 'PDOException' with message 'SQLSTATE[42000]: Sy=
ntax error
or access violation: 1064 You have an error in your SQL syntax=
; check
the manual that corresponds to your MySQL server version for the =
right
syntax to use near 'AND s.status=3D3) as passnum,  =20
            =
    (SELECT count(1) FROM et_studylog' at line 2' in
D:\WWW\boss\vendor\y=
iisoft\yii2\db\Command.php:837
Stack trace:
#0 D:\WWW\boss\vendor\yiiso=
ft\yii2\db\Command.php(837):
PDOStatement->execute()
#1 D:\WWW\boss\ven=
dor\yiisoft\yii2\db\Command.php(359):
yii\db\Command->queryInternal('<spa=
n class=3D"st...', '<span
class=3D"ke...')
#2 D:\WWW\boss\vendor\yiisof=
t\yii2\db\Query.php(206):
yii\db\Command->queryAll()
#3 D:\WWW\boss\ven=
dor\yiisoft\yii2\db\ActiveQuery.php(132):
yii\db\Query->all('<span class=
=3D"ke...')
#4 D:\WWW\boss\frontend\controllers\CategoryController.php(72=
):
yii\db\ActiveQuery->all()
#5 [internal function]:
frontend\control=
lers\CategoryController->actionIndex()
#6 D:\WWW\boss\vendor\yiisoft\yii2=
\base\InlineAction.php(55):
call_user_func_array('[<span class=3D"t...', =
'[]')
#7 D:\WWW\boss\vendor\yiisoft\yii2\base\Controller.php(151):
yii\=
base\InlineAction->runWithParams('[<span class=3D"s...')
#8 D:\WWW\boss\v=
endor\yiisoft\yii2\base\Module.php(455):
yii\base\Controller->runAction('=
<span class=3D"st...', '[<span
class=3D"s...')
#9 D:\WWW\boss\vendor\yi=
isoft\yii2\web\Application.php(84):
yii\base\Module->runAction('<span cla=
ss=3D"st...', '[<span class=3D"s...')
#10 D:\WWW\boss\vendor\yiisoft\yii2=
\base\Application.php(375):
yii\web\Application->handleRequest(Object(yii=
\web\Request))
#11 D:\WWW\boss\frontend\web\index.php(18):
yii\base\App=
lication->run()
#12 {main}

Next exception 'yii\db\Exception' with me=
ssage 'SQLSTATE[42000]:
Syntax error or access violation: 1064 You have a=
n error in your SQL
syntax; check the manual that corresponds to your MyS=
QL server version
for the right syntax to use near 'AND s.status=3D3) as =
passnum,  =20
                (SELECT count(1) FROM et_studylog' at line 2=

The SQL being executed was: SELECT cateid,catename,description,
      =
          (SELECT count(1) FROM et_studylog s WHERE
s.classify_id=3Dc.cat=
eid AND s.student_id=3D AND s.status=3D3) as passnum, =20

              =
  (SELECT count(1) FROM et_studylog s WHERE
s.classify_id=3Dc.cateid AND =
s.student_id=3D AND s.status!=3D3) as
nopassnum,
                (SELEC=
T count(1) FROM et_courseware c WHERE
c.classify_id=3Dc.cateid) as cnum=

                FROM et_category c WHERE cateid > 1' in
D:\WWW\boss\ve=
ndor\yiisoft\yii2\db\Schema.php:628
Stack trace:
#0 D:\WWW\boss\vendor\=
yiisoft\yii2\db\Command.php(852):
yii\db\Schema->convertException(Object(=
PDOException), 'SELECT
cateid,c...')
#1 D:\WWW\boss\vendor\yiisoft\yii2=
\db\Command.php(359):
yii\db\Command->queryInternal('<span class=3D"st...=
', '<span
class=3D"ke...')
#2 D:\WWW\boss\vendor\yiisoft\yii2\db\Query.=
php(206):
yii\db\Command->queryAll()
#3 D:\WWW\boss\vendor\yiisoft\yii2=
\db\ActiveQuery.php(132):
yii\db\Query->all('<span class=3D"ke...')
#4 =
D:\WWW\boss\frontend\controllers\CategoryController.php(72):
yii\db\Activ=
eQuery->all()
#5 [internal function]:
frontend\controllers\CategoryCont=
roller->actionIndex()
#6 D:\WWW\boss\vendor\yiisoft\yii2\base\InlineActio=
n.php(55):
call_user_func_array('[<span class=3D"t...', '[]')
#7 D:\WWW=
\boss\vendor\yiisoft\yii2\base\Controller.php(151):
yii\base\InlineAction=
->runWithParams('[<span class=3D"s...')
#8 D:\WWW\boss\vendor\yiisoft\yii=
2\base\Module.php(455):
yii\base\Controller->runAction('<span class=3D"st=
...', '[<span
class=3D"s...')
#9 D:\WWW\boss\vendor\yiisoft\yii2\web\Ap=
plication.php(84):
yii\base\Module->runAction('<span class=3D"st...', '[<=
span class=3D"s...')
#10 D:\WWW\boss\vendor\yiisoft\yii2\base\Application=
.php(375):
yii\web\Application->handleRequest(Object(yii\web\Request))
=
#11 D:\WWW\boss\frontend\web\index.php(18):
yii\base\Application->run()=

#12 {main}
Additional Information:
Array
(
    [0] =3D> 42000
    [1] =3D> 1064
    [2] =3D> You have =
an error in your SQL syntax; check the manual that
corresponds to your My=
SQL server version for the right syntax to use
near 'AND s.status=3D3) as=
 passnum,  =20
                (SELECT count(1) FROM et_studylog' at line 2=

)

2015-09-12 17:13:51
[127.0.0.1][-][ees9kuf7km2m0prklo3j647m13][=
info][application] $_GET =3D
[
    'type' =3D> '1'
]

$_COOKIE =
=3D [
    'PHPSESSID' =3D> 'ees9kuf7km2m0prklo3j647m13'
    '_csrf' =3D=
>
'1a28beb108d5e7f50b5f3275bd3669b32bdc336f82a3523da1e6972458197ab7a:2:{i=
:0;s:5:\"_csrf\";i:1;s:32:\"1gwEqh-N5Bz7Ht0Kzm2DDobQN_Xsu_u0\";}'
]

=
$_SESSION =3D [
    '__flash' =3D> []
]

$_SERVER =3D [
    'PATH=
' =3D>
'D:\\phpStudy\\php56n;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\=
Program
Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS=

Client\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C=
:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program
Files (x86)\\=
NVIDIA Corporation\\PhysX\\Common;C:\\Program
Files\\Intel\\WiFi\\bin\\;C=
:\\Program Files\\Common
Files\\Intel\\WirelessCommon\\;C:\\SWTOOLS\\Read=
yApps;C:\\Program
Files (x86)\\Intel\\Intel(R) Management Engine
Compon=
ents\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine
Components=
\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management
Engine Componen=
ts\\IPT;C:\\Program Files\\Intel\\Intel(R) Management
Engine Components\\=
IPT;C:\\Program Files\\Condusiv
Technologies\\ExpressCache\\;C:\\Program =
Files (x86)\\Windows
Kits\\8.1\\Windows Performance Toolkit\\;C:\\Program=
 Files\\Microsoft
SQL Server\\110\\Tools\\Binn\\;C:\\Program Files (x86)\=
\Microsoft
SDKs\\TypeScript\\1.0\\;C:\\Program Files\\Microsoft SQL
Ser=
ver\\120\\Tools\\Binn\\;C:\\Users\\zhang\\.dnx\\bin;C:\\Program
Files\\Mi=
crosoft DNX\\Dnvm\\;C:\\Program Files
(x86)\\nodejs\\;C:\\Program Files\\=
TortoiseGit\\bin;C:\\Program
Files\\Git\\cmd;C:\\Program Files\\Git\\ming=
w64\\bin;C:\\Program
Files\\Git\\usr\\bin;D:\\phpStudy\\php56n;C:\\Progra=
m
Files\\Intel\\WiFi\\bin\\;C:\\Program Files\\Common
Files\\Intel\\Wir=
elessCommon\\;C:\\Users\\zhang\\AppData\\Roaming\\npm'
    'SYSTEMROOT' =
=3D> 'C:\\WINDOWS'
    'COMSPEC' =3D> 'C:\\WINDOWS\\system32\\cmd.exe'
=
    'PATHEXT' =3D>
'.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC=
'
    'WINDIR' =3D> 'C:\\WINDOWS'
    'PHP_FCGI_MAX_REQUESTS' =3D> '100=
0'
    'PHPRC' =3D> 'D:/phpStudy/php56n'
    '_FCGI_SHUTDOWN_EVENT_' =
=3D> '2028'
    'SCRIPT_NAME' =3D> '/index.php'
    'REQUEST_URI' =3D> =
'/category/index?type=3D1'
    'QUERY_STRING' =3D> 'type=3D1'
    'REQU=
EST_METHOD' =3D> 'GET'
    'SERVER_PROTOCOL' =3D> 'HTTP/1.1'
    'GATEW=
AY_INTERFACE' =3D> 'CGI/1.1'
    'REDIRECT_URL' =3D> '/category/index'
=
    'REDIRECT_QUERY_STRING' =3D> 'type=3D1'
    'REMOTE_PORT' =3D> '9720'=

    'SCRIPT_FILENAME' =3D> 'D:/WWW/boss/frontend/web/index.php'
    'S=
ERVER_ADMIN' =3D> 'admin@phpStudy.net'
    'CONTEXT_DOCUMENT_ROOT' =3D> '=
D:/WWW/boss/frontend/web'
    'CONTEXT_PREFIX' =3D> ''
    'REQUEST_SCH=
EME' =3D> 'http'
    'DOCUMENT_ROOT' =3D> 'D:/WWW/boss/frontend/web'
  =
  'REMOTE_ADDR' =3D> '127.0.0.1'
    'SERVER_PORT' =3D> '80'
    'SERVE=
R_ADDR' =3D> '127.0.0.1'
    'SERVER_NAME' =3D> 'fr.train'
    'SERVER_=
SOFTWARE' =3D> 'Apache/2.4.10 (Win32) OpenSSL/1.0.1i
mod_fcgid/2.3.9'
 =
   'SERVER_SIGNATURE' =3D> ''
    'SystemRoot' =3D> 'C:\\WINDOWS'
    '=
HTTP_COOKIE' =3D> 'PHPSESSID=3Dees9kuf7km2m0prklo3j647m13;
_csrf=3D1a28be=
b108d5e7f50b5f3275bd3669b32bdc336f82a3523da1e6972458197ab7a%3A2%3A%7Bi%3A0%=
3Bs%3A5%3A%22_csrf%22%3Bi%3A1%3Bs%3A32%3A%221gwEqh-N5Bz7Ht0Kzm2DDobQN_Xsu_u=
0%22%3B%7D'
    'HTTP_ACCEPT_LANGUAGE' =3D> 'zh-CN,zh;q=3D0.8'
    'HTT=
P_ACCEPT_ENCODING' =3D> 'gzip,deflate,sdch'
    'HTTP_REFERER' =3D> 'http=
://fr.train/site/login'
    'HTTP_USER_AGENT' =3D> 'Mozilla/5.0 (Windows =
NT 6.3; WOW64)
AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63=

Safari/537.36'
    'HTTP_ACCEPT' =3D>
'text/html,application/xhtml+x=
ml,application/xml;q=3D0.9,image/webp,*/*;q=3D0.8'
    'HTTP_CONNECTION' =
=3D> 'close'
    'HTTP_HOST' =3D> 'fr.train'
    'REDIRECT_STATUS' =3D>=
 '200'
    'FCGI_ROLE' =3D> 'RESPONDER'
    'PHP_SELF' =3D> '/index.php=
'
    'REQUEST_TIME_FLOAT' =3D> 1442049231.5018
    'REQUEST_TIME' =3D>=
 1442049231
]